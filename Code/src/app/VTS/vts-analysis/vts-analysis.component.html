<div id="divLoader" class="loaderClass">
  <img src="../../../assets/img/loading.gif" width="50" class="imgLoader">
</div>
<!------------Desktop Navbar Start------------->
<section class="header">
  <div class="row no-gutters">
    <div class="main-headers hide-on-ipad no-gutters-iner">
      VTS Analysis
    </div>
    <div class="col-md-7 col-xl-8 ipad-pl-25">
      <button class="btn btn-primary ipad-btn ipad-btn2" (click)="setDate('','previous');">
        << </button>
          <input id="txtDate" class="date-input" type="date" (change)="setDate($event.target.value,'current')">
          <button class="btn btn-primary ipad-btn date-input-btn" (click)="setDate('','next');">
            >>
          </button>
          <select class="caret-select ipad-ipt-1 Select-Zone" id="ddlZone"
            (change)="changeZoneSelection($event.target.value)">
            <option value="0">
              --Select Zone--
            </option>
            <option *ngFor="let zone of zoneList" value={{zone.zoneName}}>
              {{zone.zoneName}}
            </option>
          </select>
          <select class="caret-select ipad-ipt-2" id="ddlWard" (change)="changeWardSelection($event.target.value)">
            <option value="0">
              --Select--
            </option>
            <option *ngFor="let ward of wardList" value={{ward.wardNo}}>
              {{ward.wardName}}
            </option>
          </select>

    </div>

    <div id="houseCount" class="col-md-5 col-xl-4 text-right total-house">
      <div class="fix-home">
        <div class="float-first float-first1">
          <i id="iconDone" (click)="showHideMarkers('hide');" class="fas fa-check-double check"
            ></i>
          <i id="iconPending" (click)="showHideMarkers('show');" class="fas fa-times times"
            ></i> <br>
          <h6 id="divTracking" class="markers">Show Markers</h6>
        </div>
        <div class="float-second float-second2">
          <span class="house"> {{progressData.penalty}} <img src="../../assets/img/penalty-bag.svg"
              class="img-fluid header-penalty" alt=""> </span><br>
          <h6 class="Penalty-heading">Penalty</h6>
        </div>

        <div class="float-third float-third3">
          <button class="btn-accordion" data-toggle="collapse" data-parent="#accordion" href="#collapsetwo"
            aria-expanded="true" aria-controls="collapsetwo"> <i class="fas fa-cog"></i>
            <h6 class="setting-heading">Settings</h6>
          </button>

        </div>
      </div>
      <div class="panel-group panel-main" id="accordion" role="tablist" aria-multiselectable="true">
        <div class="panel panel-default">
          <div class="panel-heading" role="tab" id="headingtwo">
            <h4 class="panel-title">
            </h4>
          </div>
          <div id="collapsetwo" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingtwo">
            <div class="panel-body">
              <div class="row">
                <div class="col-md-12 text-left">
                  <div class="setting-box">

                    <p id="showBoundries"> Hide Boundaries</p>

                    <button type="button" class="btn btn-main btn-success" (click)="showBounderis();"><i
                        class="fas fa-grip-lines-vertical"></i></button>
                  </div>
                  <div class="setting-box">
                    <p> Select All</p>
                    <button type="button" class="btn btn-main btn-success"
                      (click)="openModel(contentSelectAllConfirm)"><i class="far fa-window-restore"></i></button>
                  </div>
                  <div class="setting-box">
                    <p> Reset All</p>
                    <button type="button" class="btn btn-main btn-success" (click)="openModel(contentPlanConfirm)"><i
                        class="fas fa-check-double"></i></button>
                  </div>
                  <div class="setting-box">
                    <p class="previous-data"><b>Get Previous Data</b></p> <br>
                    <input class="date-input date" id="txtPreDate" type="date">
                    <button type="button" class="btn btn-success" (click)="setPreviousData();">Get</button>
                  </div>
                  <div class="setting-box arrow-button-main">
                    <button class="btn-primary arrow-button" (click)="getNextPrevious('pre');"
                      >
                      << </button>
                        <input id="txtStrokeWeight" type="text" (keyup)="getCurrentStrokeWeight($event,'web');"
                          autocomplete="off" class="date-input event-input"
                           value="4" />
                        <button class="btn-primary arrow-button" (click)="getNextPrevious('next');"
                          >
                          >>
                        </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- <div class="col-md-12 main-headers ipad-desk-hide">
        VTS Analysis
      </div> -->
  </div>
</section>
<!------------Desktop Navbar End------------->

<!----Mobile Navbar Start----->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="#">VTS Analysis</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup"
    aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
    <i class="fas fa-angle-down"></i>
  </button>
  <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
    <div class="navbar-nav">
      <div class="row">
        <div class="col-2 pr-0 ">
          <button class="btn btn-primary " (click)="setDate('','previous');">
            << </button>
        </div>
        <div class="col-8 pl-0">
          <input id="txtDateNav" class="date-input" type="date" (change)="setDate($event.target.value,'current')">
        </div>
        <div class="col-2 pl-0">
          <button class="btn btn-primary" (click)="setDate('','next');"> >> </button>
        </div>
        <div class="col-12 pr-25 pl-5 mob-pl-15 mob-pr-15">
          <select class="caret-select mobile-caret-select" id="ddlZoneNav"
            (change)="changeZoneSelection($event.target.value)">
            <option value="0">
              --Select Zone--
            </option>
            <option *ngFor="let zone of zoneList" value={{zone.zoneName}}>
              {{zone.zoneName}}
            </option>
          </select>
        </div>
        <div class="col-12 mt-10 pr-25 pl-5 mob-pl-15 mob-pr-15">
          <select class="caret-select" id="ddlWardNav" (change)="changeWardSelection($event.target.value)">
            <option value="0">
              --Select--
            </option>
            <option *ngFor="let ward of wardList" value={{ward.wardNo}}>
              {{ward.wardName}}
            </option>
          </select>
        </div>

        <div class="col-4 mt-10 pr-0">
          <div class="mb-home  text-left" style="display: none;">
            <i id="iconDoneNav" class="fas fa-check-double check2"></i>
            <i id="iconPendingNav" class="fas fa-times times2"></i> <br>
            <h6 class="Analysis-heading" id="divTrackingNav">Analysis</h6>
          </div>
        </div>
        <div class="col-4 mb-home mt-10 text-center pl-0">
          <span class="house"> {{progressData.penalty}} <img src="../../assets/img/penalty-bag.svg"
              class="img-fluid header-penalty" alt=""> </span><br>
          <h6 class="Analysis-heading">Penalty</h6>
        </div>
        <div class="col-4 mb-home mt-5 pl-0">
          <button class="btn-accordion" data-toggle="collapse" data-parent="#accordion" href="#collapsetwo"
            aria-expanded="true" aria-controls="collapsetwo"> <i class="fas fa-cog"></i>
            <h6 class="Analysis-heading">Settings</h6>
          </button>
        </div>
        <div class="panel-group panel-default-outer" id="accordion" role="tablist" aria-multiselectable="true">
          <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="headingtwo">
              <h4 class="panel-title">
              </h4>
            </div>
            <div id="collapsetwo" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingtwo">
              <div class="panel-body">
                <div class="row">
                  <div class="col-md-12 text-left">
                    <div class="setting-box">
                      <p id="showBoundriesNav"> Hide Boundaries</p>

                      <button type="button" class="btn btn-main btn-success" (click)="showBounderis();"><i
                          class="fas fa-grip-lines-vertical"></i></button>
                    </div>
                    <div class="setting-box">
                      <p> Select All</p>
                      <button type="button" class="btn btn-main btn-success"
                        (click)="openModel(contentSelectAllConfirm)"><i class="far fa-window-restore"></i></button>
                    </div>
                    <div class="setting-box">
                      <p> Reset All</p>
                      <button type="button" class="btn btn-main btn-success" (click)="openModel(contentPlanConfirm)"><i
                          class="fas fa-check-double"></i></button>
                    </div>
                    <div class="setting-box">
                      <p class="previous-data"><b>Get Previous Data</b></p> <br>
                      <input class="date-input date-input-mob-1 date" id="txtPreDateNav" type="date">
                      <button type="button" class="btn btn-success" (click)="setPreviousData();">Get</button>
                    </div>
                    <div class="setting-box button-main">

                      <button (click)="getNextPrevious('pre');" class="btn-primary mob-btn-primary mob-btn-iner"
                        >
                        << </button>
                          <input class="date-input-mob-2 date-input mob-input" id="txtStrokeWeightNav" type="text"
                            autocomplete="off" (keyup)="getCurrentStrokeWeight($event,'mob');"
                             value="4" />
                          <button class="btn-primary mob-btn-primary mob-btn-iner" (click)="getNextPrevious('next');"
                            >
                            >>
                          </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>



  </div>
</nav>
<!----Mobile Navbar End----->

<div #gmap class="map-div" id="divMap"></div>

<!----Map Content on Mobile Start----->
<div class="col-4 mb-home hide-on-desk mt-5 pl-0">
  <button class="btn-accordion mob-btn-accordion" data-toggle="collapse" data-parent="#accordion" href="#collapsethree"
    aria-expanded="true" aria-controls="collapsethree">Ward Details</button>
</div>
<div class="panel-group hide-on-desk panel-outer" id="accordion" role="tablist" aria-multiselectable="true"
  >
  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingthree">
      <h4 class="panel-title">
      </h4>
    </div>
    <div id="collapsethree" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingthree">
      <div class="panel-body mob-panel-body">
        <div id="divJaipurGreaterDetail">
          <div class="jaipur-line-details-box">
            <div class="seprater" style="display: none;">
              <div class="lines-left seprater-iner">
                {{progressData.lastShowDate}}
                <i class="fas fa-sync-alt"></i>
              </div>
            </div>
            <div class="lines-left-outer">
              <div class="lines-left">
                <h3>
                  <div class="progress">
                    <div class="progress-bar progress-bar-striped bg-success progress-iner" role="progressbar"
                      [style.width]="progressData.workPercentage" aria-valuenow="25"
                      aria-valuemin="0" aria-valuemax="100">{{progressData.workPercentage}}</div>
                  </div>
                </h3>
              </div>
            </div>
            <div class="lines">
              <h3 class="lines-heading">{{progressData.wardLength}}<span> km</span>
                <p>Total Ward Length</p>
              </h3>
            </div>
            <div class="lines2">
              <h3 class="lines-heading">{{progressData.coveredLength}}<span> km</span>
                <p>Covered Ward Length</p>
              </h3>
            </div>
          </div>
        </div>

        <div id="divDriverDetail" class="driver-helper-box">
          <div class="col-md-12 driver-helper-box-iner">
            <div>
              <input class="Add-Vehicle-input" id="txtVehicle" type="text" autocomplete="off"
                 />
              <button class="Add-Vehicle-btn" (click)="addVehicle();"
                >
                Add Vehicle
              </button>
            </div>
          </div>
          <div id="myBox">
            <div class="accordion">
              <div class="card">
                <div aria-labelledby="headingOne">
                  <div class="dth">
                    <div class="table-bg">
                      <div class="tableFixHead">
                        <table class="table table-hover">
                          <thead>
                            <tr>
                              <th scope="col"><b>Sno</b></th>
                              <th class="text-left Vehicle-table-heading" scope="col"><b>Vehicle</b></th>
                            </tr>
                          </thead>
                          <tbody>
                            <!---->
                            <tr *ngFor="let dt of vehicleList, let i=index">
                              <td class="Vehicle-table-data">{{i+1}}</td>
                              <td class="text-left">{{dt.vehicle}}
                                <span class="right">{{dt.message}}
                                  <input type="checkbox" [hidden]="dt.showCheckBox==0"></span>
                                <i class="fas fa-times times3"></i>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-12 d-ib-outer">
            <div class="d-ib">
              <img src="../../assets/img/penalty-bag.svg" class="img-fluid penalty-icon" alt="Penalty" title="Penalty">
              <input class="penalty-input" id="txtPenalty" type="number" min="0" autocomplete="off" value="0" />

            </div>
            <div class="d-ib">
              <button class="VTS-button d-ib-buttoon">Analysis
                Done</button>
            </div>
          </div>
        </div>


      </div>
    </div>
  </div>
</div>
<!----Map Content on Mobile End----->

<!----Map Content on Desktop Start----->
<div class="hide-on-mob" id="divJaipurGreaterDetail" style="display: none;">
  <div class="jaipur-line-details-box">

    <div class="seprater" style="display: none;">
      <div class="lines-left lines-left2">
        {{progressData.lastShowDate}}
        <i class="fas fa-sync-alt"></i>
      </div>
    </div>
    <div class="lines-left-outer2">
      <div class="lines-left">
        <h3>
          <div class="progress">
            <div class="progress-bar progress-bar-striped bg-success progress-iner2" role="progressbar"
              [style.width]="progressData.workPercentage" aria-valuenow="25" aria-valuemin="0"
              aria-valuemax="100">{{progressData.workPercentage}}</div>
          </div>
        </h3>
      </div>
    </div>
    <div class="lines">
      <h3 class="km">{{progressData.wardLength}}<span> km</span>
        <p>Total Ward Length</p>
      </h3>
    </div>
    <div class="lines2">
      <h3 class="km">{{progressData.coveredLength}}<span> km</span>
        <p>Covered Ward Length</p>
      </h3>
    </div>
  </div>
</div>


<div id="divDriverDetail" class="driver-helper-box hide-on-mob">
  <div class="col-md-12 popup-box-outer">
    <div class="popup-box">
      <input class="txt-inpt" id="txtVehicleNav" type="text" autocomplete="off" />
      <div class="add-icon-vehicle">
       <span class="add-icon-vehicle-span">{{progressData.totalVehicle}}</span>  <br>
        <p>Vehicles</p>
      </div>
      <div class="add-icon">
        <i class="fas fa-plus-circle" (click)="addVehicle();"></i> <br>
        <p>Add Vehicle</p>
      </div>
    </div>
  </div>
  <div id="myBox">
    <div class="accordion">
      <div class="card">
        <div aria-labelledby="headingOne">
          <div class="dth">
            <div class="table-bg">
              <div class="tableFixHead table-bg-iner2">
                <table class="table table-hover tableFixHead-iner">
                  <thead>
                    <tr>
                      <th class="text-left table-heading" scope="col"><p class="label-tbl">Select All</p> 
                        <input class="checkbox-input" id="chkSelectAll" type="checkbox" (change)="selectAllVehicle();"> </th>
                    </tr>
                  </thead>
                  <tbody>
                    <!---->
                    <tr *ngFor="let dt of vehicleList, let i=index">
                      <td class="text-left text-left-data"
                        >
                        {{dt.vehicle}} <i class="far fa-check-square square-icon" [hidden]="dt.isDone==0"
                          ></i>
                        <span class="tbl-span tbl-span2"> <span
                            class="{{dt.cssClass}}"> {{dt.message}}</span>
                          <input id="chkVehicle{{i}}" [hidden]="dt.showCheckBox==0" type="checkbox"
                            (change)="getVtsRoute(dt.vehicle,i)">
                          &nbsp; <i class="fas fa-times times-icon"
                            (click)="removeVehicle(i)"></i>
                        </span>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>

  <div class="col-md-12 btn-clk-outer">
    <button type="button" class="btn btn-success btn-clk Apply-btn"
      
      (click)="selectLines();">Apply auto route selection</button>
  </div>
</div>

<div class="msg-box" style="display: none;">
  <div class="f-msg">
    <input id="chkApprove" type="checkbox" class="form-check-input" (change)="activateApprovalButton();">
    <p>I have checked this Map carefully, Hence Approving </p>
  </div>
  <div class="r-msg">
    <button id="btnApprove" type="button" class="btn w-100 btn-success" (click)="approve();">Approve</button>
  </div>
</div>
<div class="line-count">
  <div class="f-msg line-count-iner">
    <p>
      <span>
        <b>{{progressData.savedLines}}/{{progressData.selectedLines}}</b> Saved</span>
    </p>
  </div>
  <div class="r-msg">
    <img id="imgSync" src="../../../assets/img/green_data.svg"
      (click)="getSavedLines();">
  </div>
</div>
<div id="divApproved" class="alert-box">
  <div class="apr-msg">
    <h3 class="Approved-heading"><b>Approved By</b> <br> <span> <b id="approvalName"> Harendra Singh on 6 Dec
          2020</b></span></h3>
  </div>
</div>

<div id="divEventHistory" class="event-history-box" style="display: none;">
  <div class="dth">
    <div class="table-bg">
      <div id="tblEventHistory" class="tableFixHead table-bg-iner">
        <table class="table table-hover tableFixHead-iner2">
          <tbody>
            <tr *ngFor="let dt of eventHistoryList, let i=index">
              <td class="text-left username-data"
                >
                {{dt.name}} by {{dt.userName}}<br />
                at {{dt.time}} - {{dt.desc}}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>


<!----Map Content on Desktop End----->

<!--select all Confirmation Start-->
<ng-template #contentSelectAllConfirm>
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Are you sure to select all?</h5>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-6 modal-body-iner">
            <button class="btn btn-success success-btn" (click)="selectAll();">
              Confirm</button>
          </div>
          <div class="col-md-6 modal-body-iner">
            <button class="btn btn-danger " (click)="closeModel();"> Cancel</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<!--select all Confirmation End-->


<!--Reset Confirmation Start-->
<ng-template #contentPlanConfirm>
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Are you sure to reset?</h5>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-6 modal-body-iner">
            <button class="btn btn-success success-btn" (click)="resetAllLines();">
              Confirm</button>
          </div>
          <div class="col-md-6 modal-body-iner">
            <button class="btn btn-danger " (click)="closeModel();"> Cancel</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<!--Reset Confirmation End-->