<div id="divLoaderMain" class="loaderClass">
    <img src="../../../assets/img/loading.gif" width="50" class="imgLoader">
</div>
<section class="header">
    <div class="row no-gutters">
        <div class="col-md-3 no-gutters-iner">

        </div>
        <div class="col-md-4 Surveyheading">
            Ward Survey Summary
        </div>


        <div class="col-md-5 text-right total-house fix-home-outer">
            <div class="display" id="popup">
                <div class="fix-home">
                    <div class="float-first">
                        <i class="fas fa-home home-icon"></i> <span class="house">
                            {{surveyData.totalMarkers}}</span><br>
                        <h6>Total Marker</h6>
                    </div>
                    <div class="float-second float-second2" (click)="showDateWiseDetail(contentDateWise,'Surveyed');">
                        <i class="fas fa-house-damage"></i> <span class="house"> {{surveyData.totalSurveyed}}</span><br>
                        <h6>Surveyed Marker</h6>
                    </div>
                    <div class="float-third float-second2" (click)="showDateWiseDetail(contentDateWise,'Revisit Requests');">
                        <i class="fas fa-house-damage icon-damage"></i> <span class="house">
                            {{surveyData.totalRevisit}}</span><br>
                        <h6>Revisit Request</h6>
                    </div>
                    <div class="float-fourth float-second2" (click)="showDateWiseDetail(contentDateWise,'RFID Not Matched');">
                        <i class="fas fa-house-damage icon-damage2"></i> <span class="house">
                            {{surveyData.totalOldCards}}</span><br>
                        <h6>RFID not matched</h6>
                    </div>

                    <div class="float-first fix-home-iner" style="padding-top: 5px;">
                        <i class="fa-solid fa-file-export" style="font-size: 20px; cursor: pointer; color: #1fda2f;" (click)="getAllZoneHouseTypeList();"></i><br>
                        <h6>Export Entity Types</h6>
                    </div>
                </div>
            </div>
        </div>
        <div class="arrow" onclick="show()">
            <i class="bi bi-chevron-down"></i>
        </div>
    </div>
</section>
<div class="main-content">
    <div class="row">
        <div class="col-md-5 main-content-iner">
            <div class="card card-body-outer">
                <div class="card-body card-iner">
                    <form>
                        <div class="row">
                            <div class="col-md-12 pr-1">
                                <div class="table-wrapper table-one">
                                    <table class="table table-one-iner">
                                        <thead>
                                            <th class="table-heading1">Ward</th>
                                            <th class="text-right table-heading2">
                                                Markers</th>

                                            <th class="text-right table-heading3">
                                                Surveyed</th>
                                            <th class="text-right table-heading4">
                                                Revisit</th>
                                            <th class="text-right table-heading5">
                                                RFID Not Matched</th>
                                            <th class="text-right table-heading4">
                                                Complex(s)</th>
                                        </thead>
                                        <tbody>
                                            <tr style="cursor: pointer;" id="tr{{i}}" *ngFor="let data of wardProgressList; let i=index" [hidden]="data.wardNo==0" (click)="getSurveyDetail(data.wardNo,i);">
                                                <td class="table-data1">
                                                    {{data.wardNo}}</td>
                                                <td class="text-right table-data2">
                                                    {{data.markers}}</td>

                                                <td class="text-right table-data3">
                                                    {{data.surveyed}}</td>
                                                <td class="text-right table-data4">
                                                    {{data.revisit}} </td>
                                                <td class="text-right table-data5">
                                                    {{data.oldCard}}</td>
                                                <td class="text-right table-data5">
                                                    <span [hidden]="data.complex==''">{{data.complex}}
                                                        ({{data.houseHold}})</span>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div id="divMessage" class="col-md-12 pr-1 text-center divMessage">
                                <div class="form-group">
                                    <h5>No data available</h5>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="col-md-7 card-outer">
            <div class="card custom-header-outer">
                <div class="card-header custom-header">
                    <div class="row row2">
                        <div class="col text-center">
                            <div class="table-heading">
                                <h3>
                                    <span class="tbl-points"> {{surveyData.totalLines}}</span> <br> Lines
                                </h3>
                            </div>
                        </div>
                        <div class="col text-center">
                            <div class="table-heading">
                                <h3>
                                    <span class="tbl-points"> {{surveyData.wardSurveyed}}</span> <br> Surveyed
                                </h3>
                            </div>
                        </div>
                        <div class="col text-center">
                            <div class="table-heading">
                                <h3>
                                    <span class="tbl-points"> {{surveyData.wardRevisit}}</span> <br> Revisit
                                </h3>
                            </div>
                        </div>

                        <div class="col text-center">
                            <div class="table-heading">
                                <h3 class="Spelling-heading">
                                    <span class="tbl-points"> {{surveyData.wardNameNotCorrect}}</span> <span class="refresh-btn" (click)="getNameNotCorrect();"><i
                                            class="fas fa-sync-alt sync"></i></span> <br> Spelling Check Remains
                                </h3>
                            </div>
                        </div>
                        <div class="col text-center">
                            <div class="table-heading" style="cursor: pointer;" (click)="getZoneHouseTypeList(contentHouseType);">
                                <h3>
                                    <span class="tbl-points"> <i class="fa-solid fa-table-list"></i></span> <br> Entity Types
                                </h3>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-body card-body2">
                    <div class="row">

                        <div class="col-md-12">
                            <form>
                                <div class="row">
                                    <div class="col-md-12 pr-1">
                                        <div class="table-wrapper table-scroll table-outer">
                                            <table class="table table2">
                                                <thead>
                                                    <th class="table-heading-same">Line</th>
                                                    <th class="text-right table-heading-same2">Markers</th>
                                                    <th class="text-right table-heading-same3" [hidden]="isAlreadyShow==false">
                                                        Already Installed</th>
                                                    <th class="text-right table-heading-same4">Surveyed
                                                    </th>
                                                    <th class="text-right table-heading-same5">Revisit
                                                    </th>
                                                    <th class="text-right table-heading-same6">RFID Not Matched
                                                    </th>
                                                    <th class="text-right table-heading-same4">Complex(s)
                                                    </th>
                                                    <th class="text-center table-heading-same7">#</th>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let data of lineSurveyList; let i=index">
                                                        <td class="table-data-1">
                                                            {{data.lineNo}}</td>
                                                        <td class="text-right table-data-2">
                                                            {{data.markers}}</td>
                                                        <td class="text-right table-data-3" [hidden]="isAlreadyShow==false">
                                                            {{data.alreadyCard}}</td>
                                                        <td class="text-right table-data-4">
                                                            {{data.survyed}}</td>
                                                        <td class="text-right table-data-5">
                                                            {{data.revisit}}</td>
                                                        <td class="text-right table-data-6">
                                                            {{data.oldCard}}</td>
                                                        <td class="text-right table-data-6">
                                                            <span [hidden]="data.complexCount==''">
                                                                {{data.complexCount}} ({{data.houseHoldCount}})</span>
                                                        </td>
                                                        <td class="text-center table-data-7">
                                                            <i class="far fa-eye eye-icon" [hidden]="data.survyed==0" (click)="showLineDetail(contentLineSurveyed,data.wardNo,data.lineNo);"></i>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div id="divMessage" class="col-md-12 pr-1 text-center divMessage">
                                        <div class="form-group">
                                            <h5>No data available</h5>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--Survey Line Start-->
<ng-template #contentLineSurveyed>
    <div class="close-grey-imgbox">
        <img src="../../../assets/img/close-grey.png" class="img-close" (click)="closeModel();">
    </div>
    <div class="modal-body divStatus-outer">
        <div id="divEntityList" style="display:none;position: absolute;z-index: 9999; width: 80%; height:80%;background-color: #fff; padding: 20px; border: 1px solid lightgray; overflow-y: scroll; margin-top: 5%; margin-left: 10%;">
            <img src="../../../assets/img/close-grey.png" style="float:right ;" class="img-close" (click)="hideEntity();">
            <div class="row">
                <div class="col-md-3 " *ngFor="let data of entityList" style="margin-right: -10px;">
                    <div class="row" style="margin: 0px;">
                        <div style="border: 1px solid lightgray; border-radius: 5px; padding: 5px; margin-bottom: 10px!important;background-color: #f1f1f1; ">
                            <div style="width: 96%; float:left; margin-left: 5px;">
                                <div class="content-scroll-iner">
                                    <a href="{{data.entityImageURL}}" target="_blank">
                                        <img [src]="data.entityImageURL" class="imageurl" />
                                    </a>
                                </div>
                                <div class="main-tag">
                                    <div class="f-left">
                                        <h3 class="f-left-heading"> {{data.name}} </h3><br />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="divStatus" class="content-scroll">
            <div class="row">
                <div class="col-md-4 " *ngFor="let dt of surveyedDetailList" style="margin-right: -10px;">
                    <div class="row" style="margin: 0px;">
                        <div style="border: 1px solid lightgray; border-radius: 5px; padding: 5px; margin-bottom: 10px!important;background-color: #f1f1f1; ">
                            <div style="width: 48%; float:left; margin-left: 5px;">
                                <div class="content-scroll-iner">
                                    <a href="{{dt.imageUrl}}" target="_blank">
                                        <img [src]="dt.imageUrl" class="imageurl" />
                                    </a>
                                </div>
                                <div class="main-tag">
                                    <div class="f-left">
                                        <h3 class="f-left-heading"> {{dt.cardType}} </h3><br />
                                        <h3><b> {{dt.cardNo}}</b> </h3><br />
                                    </div>
                                </div>
                            </div>
                            <div style="width: 48%; float:right;">
                                <div class="content-scroll-iner">
                                    <a href="{{dt.houseImageUrl}}" target="_blank">
                                        <img [src]="dt.houseImageUrl" class="imageurl" />
                                    </a>
                                </div>
                                <div class="main-tag">
                                    <div class="f-left">
                                        <h3> {{dt.name}} </h3><span [hidden]="dt.houseHoldCount==0" style="float: right !important; "><b>{{dt.houseHoldCount}}</b>&nbsp;<i
                                                class="far fa-eye eye-icon"
                                                style="float: right !important; cursor: pointer;"
                                                (click)="showEntity(dt.cardNo);"></i></span><br />

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</ng-template>
<!--Survey Line End-->


<!--Survey Line Start-->
<ng-template #contentDateWise>
    <div class="img-close-box">

        <img src="../../../assets/img/close-grey.png" class="img-close" (click)="closeModel();">

    </div>
    <div class="modal-body table-wrapper-outer">
        <div id="tblSurvey" class="table-wrapper table-scroll modal-body-iner">
            <table class="table table-scroll-iner">
                <thead>
                    <th class="datetable">Date</th>
                    <th class="text-right surveyTypetable"><span id="surveyType"></span></th>
                </thead>
                <tbody>
                    <tr *ngFor="let data of surveyDateList; let i=index">
                        <td class="datedata">
                            {{data.date}}</td>
                        <td class="text-right datedata">
                            {{data.count}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</ng-template>
<!--Survey Line End-->


<!--House Type  Start-->
<ng-template #contentHouseType>
    <div class="modal-header">
        <h5 class="modal-title text-center" (click)="exportHouseTypeList('0');" style="color: green; cursor: pointer;">
            <i class="fa-solid fa-file-export"></i>&nbsp;<span style="color: #000; font-size: 12px;">Export Entity
                Type</span>
        </h5>
        <button type="button" class="close" (click)="closeModel();" style="border: none;">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body content-scroll-outer" style="padding-top: 20px; margin-left: -15px; margin-right: -15px;">
        <div id="divHouseStatus" class="content-scroll">
            <div class="row">
                <div class="table-wrapper table-one">
                    <table class="table table-one-iner">
                        <thead>
                            <th class="ward-table-heading" style="width:75%">Entity Type</th>
                            <th class="text-right Markers-table-heading" style="width:25%">
                                Counts</th>
                        </thead>
                        <tbody>
                            <tr class="table-row" id="tr{{i}}" *ngFor="let data of zoneHouseTypeList; let i=index">
                                <td class="table-data" style="width:75%">
                                    {{data.houseType}}</td>
                                <td class="text-right table-data" style="width:25%">
                                    {{data.counts}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>
</ng-template>
<!--House Type End-->